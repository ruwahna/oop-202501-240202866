# Laporan Praktikum Week 15: Proyek Kelompok
## Agri-POS - Sistem Point of Sale Pertanian

---

### Informasi Praktikan

| No | Nama Lengkap | NIM | Peran |
|----|--------------|-----|-------|
| 1 | Indah Ruwahna Anugraheni | 240202866 | Project Lead & Backend Architect |
| 2 | Lia Lusianti | 240202869 | Frontend Developer & UI/UX |
| 3 | Fikianto | 240202899 | Backend Developer |
| 4 | Rizal Ramadhani | 240202883 | QA Engineer & Documentation |

- **Kelas**: 3IKRB
- **Mata Kuliah**: Pemrograman Berorientasi Objek (OOP)
- **Tanggal**: 18 Januari 2026

---

## Daftar Isi

1. [Pendahuluan](#1-pendahuluan)
2. [Analisis Kebutuhan](#2-analisis-kebutuhan)
3. [Desain Sistem](#3-desain-sistem)
4. [Implementasi](#4-implementasi)
5. [Testing](#5-testing)
6. [Screenshot Aplikasi](#6-screenshot-aplikasi)
7. [Kesimpulan](#7-kesimpulan)
8. [Lampiran](#8-lampiran)

---

## 1. Pendahuluan

### 1.1 Latar Belakang

Praktikum Week 15 merupakan proyek kelompok yang mengintegrasikan semua konsep OOP yang telah dipelajari selama semester ini. Proyek ini mengembangkan aplikasi **Agri-POS**, sebuah sistem Point of Sale untuk toko pertanian yang modern dan lengkap.

Dalam era digitalisasi, toko pertanian membutuhkan sistem yang dapat:
- Mengelola transaksi penjualan dengan cepat dan akurat
- Menyediakan berbagai metode pembayaran
- Memberikan diskon dan promosi yang fleksibel
- Menghasilkan laporan penjualan untuk analisis bisnis

### 1.2 Tujuan

1. Mengintegrasikan konsep OOP: **Encapsulation**, **Inheritance**, **Polymorphism**, **Abstraction**
2. Menerapkan **Design Patterns**: Singleton, Strategy, Factory, DAO, Observer
3. Menerapkan prinsip **SOLID** dan **Dependency Inversion Principle**
4. Mengembangkan aplikasi desktop berbasis **JavaFX**
5. Melakukan testing dengan **JUnit 5** dan **Mockito**
6. Mengimplementasikan sistem diskon dengan sinkronisasi Admin-Kasir
7. Membuat **UI responsive** yang mendukung berbagai ukuran layar

### 1.3 Ruang Lingkup

Aplikasi Agri-POS mencakup fitur-fitur berikut:

| Modul | Fitur |
|-------|-------|
| **Autentikasi** | Login dengan role Admin/Kasir, validasi role |
| **Manajemen Produk** | CRUD produk, pencarian, filter kategori, low stock alert |
| **Transaksi** | Keranjang belanja, checkout, preview struk |
| **Pembayaran** | Cash, E-Wallet (OVO, GoPay, Dana, ShopeePay), QRIS |
| **Diskon** | Persentase, nominal, bulk, voucher - dikelola Admin |
| **Laporan** | Laporan harian, periode, export |
| **Riwayat** | Riwayat transaksi, cetak ulang struk |

### 1.4 Teknologi yang Digunakan

| Kategori | Teknologi | Versi |
|----------|-----------|-------|
| Bahasa Pemrograman | Java | 17+ (OpenJDK) |
| Build Tool | Apache Maven | 3.8.x |
| GUI Framework | JavaFX | 21.0.1 |
| Database | PostgreSQL | 13+ |
| Testing | JUnit 5, Mockito | 5.9.x, 5.x |
| IDE | VS Code / IntelliJ IDEA | Latest |

---

## 2. Analisis Kebutuhan

### 2.1 Functional Requirements

| ID | Requirement | Deskripsi | Priority |
|----|-------------|-----------|----------|
| FR-1 | Manajemen Produk | Admin dapat CRUD produk pertanian | High |
| FR-2 | Transaksi Penjualan | Kasir dapat melakukan transaksi penjualan | High |
| FR-3 | Sistem Diskon | Kasir dapat menerapkan diskon pada transaksi | High |
| FR-4 | Multi Payment | Mendukung Cash, E-Wallet, QRIS | High |
| FR-5 | Struk & Laporan | Generate struk dan laporan penjualan | High |
| FR-6 | Login & Akses Kontrol | Autentikasi berbasis role (Admin/Kasir) | High |
| FR-7 | Manajemen Diskon | Admin dapat CRUD diskon, sync ke Kasir | High |
| FR-8 | Responsive UI | UI menyesuaikan ukuran layar (mobile/desktop) | Medium |

### 2.2 Non-Functional Requirements

| ID | Requirement | Deskripsi |
|----|-------------|-----------|
| NFR-1 | Performance | Response time < 2 detik |
| NFR-2 | Usability | Interface intuitif dan mudah dipelajari |
| NFR-3 | Security | SQL Injection prevention, password validation |
| NFR-4 | Maintainability | Clean code, dokumentasi lengkap |
| NFR-5 | Scalability | Arsitektur berlapis untuk kemudahan extend |

### 2.3 Use Case Diagram

```
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚            AGRI-POS SYSTEM              â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                                 â”‚                                 â”‚
            â–¼                                 â–¼                                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   LOGIN &     â”‚               â”‚  TRANSAKSI    â”‚               â”‚    ADMIN      â”‚
    â”‚   AUTH        â”‚               â”‚  (KASIR)      â”‚               â”‚   MODULE      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                               â”‚                               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚               â”‚           â”‚          â”‚          â”‚         â”‚          â”‚          â”‚
    â–¼               â–¼           â–¼          â–¼          â–¼         â–¼          â–¼          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Login  â”‚   â”‚ Logout â”‚   â”‚  Cart  â”‚ â”‚Checkoutâ”‚ â”‚ Diskon â”‚ â”‚Dashboardâ”‚ â”‚Produk  â”‚ â”‚ Diskon â”‚
â”‚        â”‚   â”‚        â”‚   â”‚        â”‚ â”‚        â”‚ â”‚        â”‚ â”‚        â”‚ â”‚ CRUD   â”‚ â”‚ CRUD   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚          â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”  â”Œâ”€â”€â”€â”´â”€â”€â”€â”
                        â”‚           â”‚  â”‚       â”‚
                        â–¼           â–¼  â–¼       â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  Cash  â”‚  â”‚E-Walletâ”‚  â”‚  QRIS  â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜


    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  KASIR  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  ADMIN  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.4 Actor Description

| Actor | Deskripsi | Hak Akses |
|-------|-----------|-----------|
| **Kasir** | Operator transaksi penjualan | Login, View Produk (read-only), Transaksi, Keranjang, Checkout, Apply Diskon/Voucher, Cetak Struk, Riwayat Transaksi |
| **Admin** | Administrator sistem | Full Access: Dashboard, CRUD Produk, CRUD Diskon, Laporan Penjualan, Export Report, Low Stock Alert |

### 2.5 Use Case Detail per Actor

#### ğŸª Kasir - Use Case List (18 Use Cases)

| No | Use Case | Deskripsi | Tab Menu |
|----|----------|-----------|----------|
| 1 | Login | Autentikasi masuk sistem dengan pilih role | LoginView |
| 2 | Logout | Keluar dari sistem | Header |
| 3 | New Transaction | Membuat transaksi penjualan baru | ğŸ›’ Transaksi Baru |
| 4 | Search Product | Mencari produk berdasarkan nama/kode | ğŸ›’ Transaksi Baru |
| 5 | Filter Category | Filter produk berdasarkan kategori | ğŸ›’ Transaksi Baru |
| 6 | Add to Cart | Menambahkan produk ke keranjang | ğŸ›’ Transaksi Baru |
| 7 | Update Cart Qty | Mengubah jumlah item di keranjang | ğŸ›’ Transaksi Baru |
| 8 | Remove from Cart | Menghapus item dari keranjang | ğŸ›’ Transaksi Baru |
| 9 | Clear Cart | Mengosongkan seluruh keranjang | ğŸ›’ Transaksi Baru |
| 10 | Checkout (Cash) | Proses pembayaran tunai | ğŸ›’ Transaksi Baru |
| 11 | Checkout (E-Wallet) | Proses pembayaran e-wallet | ğŸ›’ Transaksi Baru |
| 12 | Checkout (QRIS) | Proses pembayaran QRIS | ğŸ›’ Transaksi Baru |
| 13 | Apply Discount | Menerapkan diskon dari dropdown | ğŸ›’ Transaksi Baru |
| 14 | Apply Voucher | Memasukkan kode voucher manual | ğŸ›’ Transaksi Baru |
| 15 | Refresh Discount | Memperbarui daftar diskon dari Admin | ğŸ›’ Transaksi Baru |
| 16 | Print Receipt | Mencetak struk pembelian | ğŸ›’ Transaksi Baru |
| 17 | View Transaction History | Melihat riwayat transaksi | ğŸ“‹ Riwayat Transaksi |
| 18 | Reprint Receipt | Cetak ulang struk transaksi lama | ğŸ“‹ Riwayat Transaksi |

#### ğŸ‘” Admin - Use Case List (16 Use Cases)

| No | Use Case | Deskripsi | Tab Menu |
|----|----------|-----------|----------|
| 1 | Login | Autentikasi masuk sistem dengan pilih role | LoginView |
| 2 | Logout | Keluar dari sistem | Header |
| 3 | View Dashboard | Melihat statistik penjualan dan grafik | ğŸ“Š Dashboard |
| 4 | View Low Stock Alert | Melihat produk dengan stok rendah | ğŸ“Š Dashboard |
| 5 | Add Product | Menambah produk baru | ğŸ“¦ Manajemen Produk |
| 6 | Edit Product | Mengubah data produk | ğŸ“¦ Manajemen Produk |
| 7 | Delete Product | Menghapus produk dari sistem | ğŸ“¦ Manajemen Produk |
| 8 | Search Product | Mencari produk | ğŸ“¦ Manajemen Produk |
| 9 | Daily Sales Report | Generate laporan harian | ğŸ“ˆ Laporan Penjualan |
| 10 | Period Sales Report | Generate laporan periode | ğŸ“ˆ Laporan Penjualan |
| 11 | Export Report | Export laporan ke file | ğŸ“ˆ Laporan Penjualan |
| 12 | Add Discount | Menambah diskon baru | ğŸ Manajemen Diskon |
| 13 | Edit Discount | Mengubah konfigurasi diskon | ğŸ Manajemen Diskon |
| 14 | Delete Discount | Menghapus diskon | ğŸ Manajemen Diskon |
| 15 | Toggle Discount Status | Aktifkan/nonaktifkan diskon | ğŸ Manajemen Diskon |
| 16 | Search Discount | Mencari diskon | ğŸ Manajemen Diskon |

---

## 3. Desain Sistem

### 3.1 Arsitektur Sistem (Layered Architecture)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            PRESENTATION LAYER                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ LoginView   â”‚ â”‚ MainView    â”‚ â”‚Transaction  â”‚ â”‚ ReportView  â”‚ â”‚ Discount  â”‚ â”‚
â”‚  â”‚             â”‚ â”‚             â”‚ â”‚ View        â”‚ â”‚             â”‚ â”‚ MgmtView  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚  â”‚ Dashboard   â”‚ â”‚ ProductMgmt â”‚ â”‚ History     â”‚      (JavaFX GUI)             â”‚
â”‚  â”‚ View        â”‚ â”‚ View        â”‚ â”‚ View        â”‚                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚ Events & User Actions
                                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            CONTROLLER LAYER                                     â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚         â”‚     PosController       â”‚         â”‚    LoginController      â”‚        â”‚
â”‚         â”‚  - productService       â”‚         â”‚  - authService          â”‚        â”‚
â”‚         â”‚  - cartService          â”‚         â”‚  - currentUser          â”‚        â”‚
â”‚         â”‚  - transactionService   â”‚         â”‚  - selectedRole         â”‚        â”‚
â”‚         â”‚  - reportService        â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚  - receiptService       â”‚                                            â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚ Business Logic Calls
                                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              SERVICE LAYER                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ Product     â”‚ â”‚ Cart        â”‚ â”‚ Transaction â”‚ â”‚ Auth        â”‚               â”‚
â”‚  â”‚ Service     â”‚ â”‚ Service     â”‚ â”‚ Service     â”‚ â”‚ Service     â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ Report      â”‚ â”‚ Receipt     â”‚ â”‚ DiscountConfigService       â”‚               â”‚
â”‚  â”‚ Service     â”‚ â”‚ Service     â”‚ â”‚ (Singleton - Shared State)  â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ PAYMENT (Strategy Pattern) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  <<interface>>         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚    â”‚
â”‚  â”‚  PaymentMethod    â”€â”€â”€â–º â”‚   Cash    â”‚ â”‚  E-Wallet â”‚ â”‚   QRIS    â”‚       â”‚    â”‚
â”‚  â”‚                        â”‚  Payment  â”‚ â”‚  Payment  â”‚ â”‚  Payment  â”‚       â”‚    â”‚
â”‚  â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚    â”‚
â”‚  â”‚  PaymentMethodFactory (Factory Pattern)                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ DISCOUNT (Strategy Pattern) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  <<interface>>         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚    â”‚
â”‚  â”‚  DiscountStrategy â”€â”€â”€â–º â”‚Percentage â”‚ â”‚  Fixed    â”‚ â”‚   Bulk    â”‚       â”‚    â”‚
â”‚  â”‚                        â”‚ Discount  â”‚ â”‚ Discount  â”‚ â”‚ Discount  â”‚       â”‚    â”‚
â”‚  â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚ Data Access via Interfaces (DIP)
                                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                DAO LAYER                                        â”‚
â”‚                                                                                 â”‚
â”‚   <<interface>>           <<interface>>           <<interface>>                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ ProductDAO  â”‚         â”‚  UserDAO    â”‚         â”‚Transaction  â”‚               â”‚
â”‚  â”‚ + findAll() â”‚         â”‚ + findBy..()â”‚         â”‚    DAO      â”‚               â”‚
â”‚  â”‚ + insert()  â”‚         â”‚ + insert()  â”‚         â”‚ + findAll() â”‚               â”‚
â”‚  â”‚ + update()  â”‚         â”‚ + update()  â”‚         â”‚ + insert()  â”‚               â”‚
â”‚  â”‚ + delete()  â”‚         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                â”‚                       â”‚                       â”‚
â”‚         â”‚                       â”‚                       â”‚                       â”‚
â”‚         â–¼                       â–¼                       â–¼                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ JdbcProduct â”‚         â”‚ JdbcUser    â”‚         â”‚ JdbcTrans   â”‚               â”‚
â”‚  â”‚ DAO         â”‚         â”‚ DAO         â”‚         â”‚ DAO         â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚ JDBC Connection
                                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              DATABASE LAYER                                     â”‚
â”‚                                                                                 â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚       â”‚         DatabaseConnection (Singleton Pattern)            â”‚            â”‚
â”‚       â”‚              - instance: Connection                       â”‚            â”‚
â”‚       â”‚              + getInstance(): Connection                  â”‚            â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                    â”‚                                            â”‚
â”‚                                    â–¼                                            â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚                          â”‚   PostgreSQL    â”‚                                    â”‚
â”‚                          â”‚    Database     â”‚                                    â”‚
â”‚                          â”‚    (agripos)    â”‚                                    â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Class Diagram - Model Classes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              MODEL CLASSES                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Product       â”‚    â”‚        User         â”‚    â”‚     Transaction     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - id: int           â”‚    â”‚ - id: int           â”‚    â”‚ - id: int           â”‚
â”‚ - code: String      â”‚    â”‚ - username: String  â”‚    â”‚ - code: String      â”‚
â”‚ - name: String      â”‚    â”‚ - password: String  â”‚    â”‚ - date: LocalDateTimeâ”‚
â”‚ - category: String  â”‚    â”‚ - fullName: String  â”‚    â”‚ - cashierUsername   â”‚
â”‚ - price: double     â”‚    â”‚ - role: String      â”‚    â”‚ - subtotal: double  â”‚
â”‚ - stock: int        â”‚    â”‚ - active: boolean   â”‚    â”‚ - discount: double  â”‚
â”‚ - unit: String      â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚ - tax: double       â”‚
â”‚ - description: Stringâ”‚   â”‚ + getters/setters   â”‚    â”‚ - total: double     â”‚
â”‚ - active: boolean   â”‚    â”‚ + isAdmin(): booleanâ”‚    â”‚ - paymentMethod     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚ + isKasir(): booleanâ”‚    â”‚ - amountPaid: doubleâ”‚
â”‚ + getters/setters   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ - changeAmount      â”‚
â”‚ + isLowStock(): boolâ”‚                               â”‚ - items: List       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                                      â”‚ + getters/setters   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ + addItem()         â”‚
â”‚      CartItem       â”‚    â”‚   CheckoutSummary   â”‚    â”‚ + calculateTotal()  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ - product: Product  â”‚    â”‚ - subtotal: double  â”‚
â”‚ - quantity: int     â”‚    â”‚ - discount: double  â”‚
â”‚ - subtotal: double  â”‚    â”‚ - tax: double       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚ - total: double     â”‚
â”‚ + getters/setters   â”‚    â”‚ - discountName: Stringâ”‚
â”‚ + calculateSubtotal()â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ + getters/setters   â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DISCOUNT CONFIG (NEW)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           DiscountConfig                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - name: String                          â”‚
â”‚ - code: String                          â”‚
â”‚ - type: String (Persentase/Nominal/Bulk)â”‚
â”‚ - value: double                         â”‚
â”‚ - minPurchase: double                   â”‚
â”‚ - minItems: int                         â”‚
â”‚ - active: boolean                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + getters/setters                       â”‚
â”‚ + getDisplayName(): String              â”‚
â”‚ + getMinQty(): int                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 Class Diagram - Strategy Pattern (Payment)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     STRATEGY PATTERN - PAYMENT METHOD                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              <<interface>>
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚    PaymentMethod    â”‚
                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                         â”‚ + validate(): bool  â”‚
                         â”‚ + pay(amount): bool â”‚
                         â”‚ + getMethodName()   â”‚
                         â”‚ + getDetails()      â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                        â”‚                        â”‚
           â–¼                        â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    CashPayment      â”‚  â”‚  EWalletPayment     â”‚  â”‚    QRISPayment      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - amountPaid: doubleâ”‚  â”‚ - provider: String  â”‚  â”‚ - qrCode: String    â”‚
â”‚ - change: double    â”‚  â”‚ - phoneNumber: Stringâ”‚ â”‚ - referenceId: Stringâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚ - amount: double    â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + validate(): bool  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚ + validate(): bool  â”‚
â”‚ + pay(amount): bool â”‚  â”‚ + validate(): bool  â”‚  â”‚ + pay(amount): bool â”‚
â”‚ + getMethodName()   â”‚  â”‚ + pay(amount): bool â”‚  â”‚ + getMethodName()   â”‚
â”‚ + getChange()       â”‚  â”‚ + getMethodName()   â”‚  â”‚ + generateQR()      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ + getProvider()     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     FACTORY PATTERN - PAYMENT FACTORY                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       PaymentMethodFactory              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + createPayment(type, params): Payment  â”‚
â”‚ + createCashPayment(paid, total)        â”‚
â”‚ + createEWalletPayment(provider, phone) â”‚
â”‚ + createQRISPayment(amount)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4 Class Diagram - DAO Pattern

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          DAO PATTERN - DATA ACCESS                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

      <<interface>>                <<interface>>                <<interface>>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ProductDAO      â”‚      â”‚      UserDAO        â”‚      â”‚   TransactionDAO    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + findAll(): List   â”‚      â”‚ + findByUsername()  â”‚      â”‚ + findAll(): List   â”‚
â”‚ + findByCode(): Opt â”‚      â”‚ + findById(): Opt   â”‚      â”‚ + findByCode(): Opt â”‚
â”‚ + findByCategory()  â”‚      â”‚ + insert(): void    â”‚      â”‚ + findByDate()      â”‚
â”‚ + insert(): void    â”‚      â”‚ + update(): void    â”‚      â”‚ + findByDateRange() â”‚
â”‚ + update(): void    â”‚      â”‚ + existsByUsername()â”‚      â”‚ + insert(): void    â”‚
â”‚ + delete(): void    â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ + update(): void    â”‚
â”‚ + updateStock()     â”‚                 â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚                            â”‚
           â”‚                            â”‚                            â”‚
           â–¼                            â–¼                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   JdbcProductDAO    â”‚      â”‚    JdbcUserDAO      â”‚      â”‚ JdbcTransactionDAO  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - connection: Conn  â”‚      â”‚ - connection: Conn  â”‚      â”‚ - connection: Conn  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ (implements all     â”‚      â”‚ (implements all     â”‚      â”‚ (implements all     â”‚
â”‚  interface methods) â”‚      â”‚  interface methods) â”‚      â”‚  interface methods) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.5 Sequence Diagram - Login

```
â”Œâ”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User â”‚          â”‚ LoginView â”‚          â”‚LoginController â”‚          â”‚ AuthService â”‚
â””â”€â”€â”¬â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
   â”‚                    â”‚                        â”‚                          â”‚
   â”‚ 1. Input username  â”‚                        â”‚                          â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                        â”‚                          â”‚
   â”‚                    â”‚                        â”‚                          â”‚
   â”‚ 2. Input password  â”‚                        â”‚                          â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                        â”‚                          â”‚
   â”‚                    â”‚                        â”‚                          â”‚
   â”‚ 3. Select role     â”‚                        â”‚                          â”‚
   â”‚   (Admin/Kasir)    â”‚                        â”‚                          â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                        â”‚                          â”‚
   â”‚                    â”‚                        â”‚                          â”‚
   â”‚ 4. Click "Masuk"   â”‚                        â”‚                          â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                        â”‚                          â”‚
   â”‚                    â”‚                        â”‚                          â”‚
   â”‚                    â”‚ 5. handleLogin()       â”‚                          â”‚
   â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
   â”‚                    â”‚                        â”‚                          â”‚
   â”‚                    â”‚                        â”‚ 6. validateRole()        â”‚
   â”‚                    â”‚                        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                    â”‚                        â”‚                          â”‚
   â”‚                    â”‚                        â”‚ 7. authenticate(user,pw) â”‚
   â”‚                    â”‚                        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                    â”‚                        â”‚                          â”‚
   â”‚                    â”‚                        â”‚ 8. return User/null      â”‚
   â”‚                    â”‚                        â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚                    â”‚                        â”‚                          â”‚
   â”‚                    â”‚ 9. Open MainView(role) â”‚                          â”‚
   â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                          â”‚
   â”‚                    â”‚                        â”‚                          â”‚
   â”‚ 10. Show main app  â”‚                        â”‚                          â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                        â”‚                          â”‚
   â”‚                    â”‚                        â”‚                          â”‚
```

### 3.6 Sequence Diagram - Checkout Transaction

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Kasir â”‚      â”‚TransactionViewâ”‚      â”‚PosController â”‚      â”‚CartService  â”‚      â”‚PaymentMethodâ”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚                  â”‚                     â”‚                     â”‚                   â”‚
    â”‚ 1. Add products  â”‚                     â”‚                     â”‚                   â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚                     â”‚                   â”‚
    â”‚                  â”‚                     â”‚                     â”‚                   â”‚
    â”‚                  â”‚ 2. addToCart()      â”‚                     â”‚                   â”‚
    â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚                   â”‚
    â”‚                  â”‚                     â”‚                     â”‚                   â”‚
    â”‚                  â”‚                     â”‚ 3. addItem()        â”‚                   â”‚
    â”‚                  â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚
    â”‚                  â”‚                     â”‚                     â”‚                   â”‚
    â”‚ 4. Apply discountâ”‚                     â”‚                     â”‚                   â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚                     â”‚                   â”‚
    â”‚                  â”‚                     â”‚                     â”‚                   â”‚
    â”‚                  â”‚ 5. applyDiscount()  â”‚                     â”‚                   â”‚
    â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚                   â”‚
    â”‚                  â”‚                     â”‚                     â”‚                   â”‚
    â”‚ 6. Select paymentâ”‚                     â”‚                     â”‚                   â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚                     â”‚                   â”‚
    â”‚                  â”‚                     â”‚                     â”‚                   â”‚
    â”‚ 7. Click Checkoutâ”‚                     â”‚                     â”‚                   â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚                     â”‚                   â”‚
    â”‚                  â”‚                     â”‚                     â”‚                   â”‚
    â”‚                  â”‚ 8. checkout()       â”‚                     â”‚                   â”‚
    â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚                   â”‚
    â”‚                  â”‚                     â”‚                     â”‚                   â”‚
    â”‚                  â”‚                     â”‚ 9. createPayment()  â”‚                   â”‚
    â”‚                  â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
    â”‚                  â”‚                     â”‚                     â”‚                   â”‚
    â”‚                  â”‚                     â”‚ 10. validate()      â”‚                   â”‚
    â”‚                  â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
    â”‚                  â”‚                     â”‚                     â”‚                   â”‚
    â”‚                  â”‚                     â”‚ 11. pay()           â”‚                   â”‚
    â”‚                  â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
    â”‚                  â”‚                     â”‚                     â”‚                   â”‚
    â”‚                  â”‚                     â”‚ 12. return result   â”‚                   â”‚
    â”‚                  â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚                  â”‚                     â”‚                     â”‚                   â”‚
    â”‚                  â”‚ 13. generateReceipt()â”‚                    â”‚                   â”‚
    â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                     â”‚                   â”‚
    â”‚                  â”‚                     â”‚                     â”‚                   â”‚
    â”‚ 14. Show receipt â”‚                     â”‚                     â”‚                   â”‚
    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                     â”‚                     â”‚                   â”‚
    â”‚                  â”‚                     â”‚                     â”‚                   â”‚
```

### 3.7 Sequence Diagram - Admin Discount Management (NEW)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Admin â”‚      â”‚DiscountManagementViewâ”‚      â”‚DiscountConfigServiceâ”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                     â”‚                            â”‚
    â”‚ 1. Open Tab Diskon  â”‚                            â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                            â”‚
    â”‚                     â”‚                            â”‚
    â”‚                     â”‚ 2. getInstance()           â”‚
    â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
    â”‚                     â”‚                            â”‚
    â”‚                     â”‚ 3. getDiscountConfigs()    â”‚
    â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
    â”‚                     â”‚                            â”‚
    â”‚                     â”‚ 4. return ObservableList   â”‚
    â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚                     â”‚                            â”‚
    â”‚ 5. Display discountsâ”‚                            â”‚
    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                            â”‚
    â”‚                     â”‚                            â”‚
    â”‚ 6. Fill form & Add  â”‚                            â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                            â”‚
    â”‚                     â”‚                            â”‚
    â”‚                     â”‚ 7. addDiscount(config)     â”‚
    â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
    â”‚                     â”‚                            â”‚
    â”‚                     â”‚ 8. Update ObservableList   â”‚
    â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚                     â”‚                            â”‚
    â”‚ 9. Show success msg â”‚                            â”‚
    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                            â”‚
    â”‚                     â”‚                            â”‚
    â”‚                     â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚                     â”‚     â”‚ KASIR AUTO-SYNC â”‚    â”‚
    â”‚                     â”‚     â”‚ Via Singleton   â”‚    â”‚
    â”‚                     â”‚     â”‚ Pattern         â”‚    â”‚
    â”‚                     â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
    â”‚                     â”‚                            â”‚
```

### 3.8 Sequence Diagram - Kasir Apply Discount (NEW)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Kasir â”‚      â”‚TransactionViewâ”‚      â”‚DiscountConfigServiceâ”‚      â”‚PosController â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                  â”‚                         â”‚                        â”‚
    â”‚ 1. Click ğŸ”„      â”‚                         â”‚                        â”‚
    â”‚   Refresh        â”‚                         â”‚                        â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                         â”‚                        â”‚
    â”‚                  â”‚                         â”‚                        â”‚
    â”‚                  â”‚ 2. getActiveDiscounts() â”‚                        â”‚
    â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                        â”‚
    â”‚                  â”‚                         â”‚                        â”‚
    â”‚                  â”‚ 3. return filtered list â”‚                        â”‚
    â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                        â”‚
    â”‚                  â”‚                         â”‚                        â”‚
    â”‚ 4. Update combo  â”‚                         â”‚                        â”‚
    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                         â”‚                        â”‚
    â”‚                  â”‚                         â”‚                        â”‚
    â”‚ 5. Select discountâ”‚                        â”‚                        â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                         â”‚                        â”‚
    â”‚                  â”‚                         â”‚                        â”‚
    â”‚ 6. Click Apply   â”‚                         â”‚                        â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                         â”‚                        â”‚
    â”‚                  â”‚                         â”‚                        â”‚
    â”‚                  â”‚ 7. findByCode(code)     â”‚                        â”‚
    â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                        â”‚
    â”‚                  â”‚                         â”‚                        â”‚
    â”‚                  â”‚ 8. return DiscountConfigâ”‚                        â”‚
    â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                        â”‚
    â”‚                  â”‚                         â”‚                        â”‚
    â”‚                  â”‚ 9. applyDiscount(type, value)                    â”‚
    â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
    â”‚                  â”‚                         â”‚                        â”‚
    â”‚                  â”‚ 10. updateSummary()     â”‚                        â”‚
    â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚                  â”‚                         â”‚                        â”‚
    â”‚ 11. Show total   â”‚                         â”‚                        â”‚
    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                         â”‚                        â”‚
    â”‚                  â”‚                         â”‚                        â”‚
```

### 3.9 Design Patterns Summary

| Pattern | Class/Interface | Tujuan |
|---------|-----------------|--------|
| **Singleton** | `DatabaseConnection` | Single database connection instance |
| **Singleton** | `DiscountConfigService` | Shared discount config Admin-Kasir |
| **Strategy** | `PaymentMethod`, `CashPayment`, `EWalletPayment`, `QRISPayment` | Metode pembayaran yang dapat di-extend |
| **Strategy** | `DiscountStrategy`, `PercentageDiscount`, `FixedDiscount`, `BulkDiscount` | Tipe diskon yang fleksibel |
| **Factory** | `PaymentMethodFactory` | Membuat instance payment method |
| **DAO** | `ProductDAO`, `UserDAO`, `TransactionDAO` | Abstraksi akses database |
| **Observer** | JavaFX `ObservableList` | Real-time sync discount changes |
| **MVC** | View, Controller, Model | Separation of concerns |

### 3.10 Database Schema (ERD)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            DATABASE: agripos                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        users          â”‚              â”‚       products        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ * id: SERIAL (PK)     â”‚              â”‚ * id: SERIAL (PK)     â”‚
â”‚   username: VARCHAR   â”‚â”€â”€â”           â”‚   code: VARCHAR (UQ)  â”‚
â”‚   password: VARCHAR   â”‚  â”‚           â”‚   name: VARCHAR       â”‚
â”‚   full_name: VARCHAR  â”‚  â”‚           â”‚   category: VARCHAR   â”‚
â”‚   role: VARCHAR       â”‚  â”‚           â”‚   price: DECIMAL      â”‚
â”‚   active: BOOLEAN     â”‚  â”‚           â”‚   stock: INTEGER      â”‚
â”‚   created_at: TIMESTAMPâ”‚ â”‚           â”‚   unit: VARCHAR       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚   description: TEXT   â”‚
                           â”‚           â”‚   active: BOOLEAN     â”‚
                           â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚                       â”‚
                           â”‚ 1                     â”‚ 1
                           â”‚                       â”‚
                           â–¼ *                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚           transactions                â”‚         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚ * id: SERIAL (PK)                     â”‚         â”‚
â”‚   transaction_code: VARCHAR (UQ)      â”‚         â”‚
â”‚   transaction_date: TIMESTAMP         â”‚         â”‚
â”‚   cashier_username: VARCHAR           â”‚         â”‚
â”‚   user_id: INTEGER (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚   subtotal: DECIMAL                   â”‚
â”‚   discount: DECIMAL                   â”‚  â† NEW: Kolom diskon
â”‚   tax: DECIMAL                        â”‚
â”‚   total: DECIMAL                      â”‚
â”‚   payment_method: VARCHAR             â”‚
â”‚   amount_paid: DECIMAL                â”‚
â”‚   change_amount: DECIMAL              â”‚
â”‚   status: VARCHAR                     â”‚
â”‚   notes: TEXT                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚ 1
                    â”‚
                    â–¼ *
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        transaction_items              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ * id: SERIAL (PK)                     â”‚
â”‚   transaction_id: INTEGER (FK) â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º transactions.id
â”‚   product_id: INTEGER (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º products.id
â”‚   product_code: VARCHAR               â”‚
â”‚   product_name: VARCHAR               â”‚
â”‚   quantity: INTEGER                   â”‚
â”‚   unit_price: DECIMAL                 â”‚
â”‚   subtotal: DECIMAL                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

RELASI:
â•â•â•â•â•â•â•
â€¢ users (1) â”€â”€â”€â”€â”€â”€< (*) transactions       : Satu user punya banyak transaksi
â€¢ transactions (1) â”€â”€â”€â”€â”€â”€< (*) transaction_items : Satu transaksi punya banyak item
â€¢ products (1) â”€â”€â”€â”€â”€â”€< (*) transaction_items     : Satu produk bisa di banyak item
```

---

## 4. Implementasi

### 4.1 Struktur Package

```
src/main/java/com/upb/agripos/
â”œâ”€â”€ AppJavaFx.java                 # Main entry point
â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ LoginController.java       # Handle login
â”‚   â””â”€â”€ PosController.java         # Handle business logic
â”œâ”€â”€ dao/
â”‚   â”œâ”€â”€ ProductDAO.java            # Interface
â”‚   â”œâ”€â”€ UserDAO.java               # Interface
â”‚   â”œâ”€â”€ TransactionDAO.java        # Interface
â”‚   â””â”€â”€ impl/
â”‚       â”œâ”€â”€ JdbcProductDAO.java
â”‚       â”œâ”€â”€ JdbcUserDAO.java
â”‚       â””â”€â”€ JdbcTransactionDAO.java
â”œâ”€â”€ model/
â”‚   â”œâ”€â”€ Product.java
â”‚   â”œâ”€â”€ User.java
â”‚   â”œâ”€â”€ Transaction.java
â”‚   â”œâ”€â”€ CartItem.java
â”‚   â””â”€â”€ CheckoutSummary.java
â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ ProductService.java
â”‚   â”œâ”€â”€ CartService.java
â”‚   â”œâ”€â”€ TransactionService.java
â”‚   â”œâ”€â”€ AuthService.java
â”‚   â”œâ”€â”€ ReportService.java
â”‚   â”œâ”€â”€ ReceiptService.java
â”‚   â””â”€â”€ DiscountConfigService.java    # NEW: Singleton
â”œâ”€â”€ strategy/
â”‚   â”œâ”€â”€ payment/
â”‚   â”‚   â”œâ”€â”€ PaymentMethod.java        # Interface
â”‚   â”‚   â”œâ”€â”€ CashPayment.java
â”‚   â”‚   â”œâ”€â”€ EWalletPayment.java
â”‚   â”‚   â”œâ”€â”€ QRISPayment.java
â”‚   â”‚   â””â”€â”€ PaymentMethodFactory.java
â”‚   â””â”€â”€ discount/
â”‚       â”œâ”€â”€ DiscountStrategy.java     # Interface
â”‚       â”œâ”€â”€ PercentageDiscount.java
â”‚       â”œâ”€â”€ FixedDiscount.java
â”‚       â”œâ”€â”€ BulkDiscount.java
â”‚       â””â”€â”€ VoucherDiscount.java
â”œâ”€â”€ util/
â”‚   â””â”€â”€ DatabaseConnection.java       # Singleton
â””â”€â”€ view/
    â”œâ”€â”€ LoginView.java
    â”œâ”€â”€ MainView.java
    â”œâ”€â”€ TransactionView.java
    â”œâ”€â”€ DashboardView.java
    â”œâ”€â”€ ProductManagementView.java
    â”œâ”€â”€ ReportView.java
    â”œâ”€â”€ HistoryView.java
    â””â”€â”€ DiscountManagementView.java   # NEW
```

### 4.2 Implementasi Singleton - DatabaseConnection

```java
public class DatabaseConnection {
    private static DatabaseConnection instance;
    private Connection connection;
    
    private DatabaseConnection() {
        try {
            Class.forName("org.postgresql.Driver");
            this.connection = DriverManager.getConnection(
                "jdbc:postgresql://localhost:5432/agripos",
                "postgres", 
                "password"
            );
        } catch (Exception e) {
            System.err.println("Database connection failed: " + e.getMessage());
        }
    }
    
    public static synchronized DatabaseConnection getInstance() {
        if (instance == null) {
            instance = new DatabaseConnection();
        }
        return instance;
    }
    
    public Connection getConnection() {
        return connection;
    }
}
```

### 4.3 Implementasi Singleton - DiscountConfigService (NEW)

```java
public class DiscountConfigService {
    private static DiscountConfigService instance;
    private final ObservableList<DiscountConfig> discountConfigs;
    
    private DiscountConfigService() {
        discountConfigs = FXCollections.observableArrayList();
        loadDefaultDiscounts();
    }
    
    public static synchronized DiscountConfigService getInstance() {
        if (instance == null) {
            instance = new DiscountConfigService();
        }
        return instance;
    }
    
    private void loadDefaultDiscounts() {
        discountConfigs.addAll(
            new DiscountConfig("Diskon Umum", "UMUM5", "Persentase", 5, 0, 0, true),
            new DiscountConfig("Diskon Member", "MEMBER10", "Persentase", 10, 0, 0, true),
            new DiscountConfig("Diskon Bulk", "BULK15", "Persentase", 15, 0, 5, true),
            new DiscountConfig("Welcome Discount", "WELCOME", "Persentase", 5, 0, 0, true),
            new DiscountConfig("Promo 50K", "PROMO50K", "Nominal", 50000, 200000, 0, true)
        );
    }
    
    public ObservableList<DiscountConfig> getActiveDiscounts() {
        return discountConfigs.filtered(DiscountConfig::isActive);
    }
    
    public void addDiscount(DiscountConfig config) {
        discountConfigs.add(config);
    }
    
    public DiscountConfig findByCode(String code) {
        return discountConfigs.stream()
            .filter(d -> d.getCode().equalsIgnoreCase(code))
            .findFirst()
            .orElse(null);
    }
    
    // Inner class
    public static class DiscountConfig {
        private String name, code, type;
        private double value, minPurchase;
        private int minItems;
        private boolean active;
        
        // Constructor, getters, setters...
    }
}
```

### 4.4 Implementasi Strategy Pattern - Payment

```java
// Interface
public interface PaymentMethod {
    boolean validate();
    boolean pay(double amount);
    String getMethodName();
    String getDetails();
}

// Concrete Strategy - Cash
public class CashPayment implements PaymentMethod {
    private double amountPaid;
    private double totalAmount;
    private double change;
    
    public CashPayment(double amountPaid, double totalAmount) {
        this.amountPaid = amountPaid;
        this.totalAmount = totalAmount;
        this.change = amountPaid - totalAmount;
    }
    
    @Override
    public boolean validate() {
        return amountPaid >= totalAmount;
    }
    
    @Override
    public boolean pay(double amount) {
        if (validate()) {
            this.change = amountPaid - amount;
            return true;
        }
        return false;
    }
    
    @Override
    public String getMethodName() {
        return "Tunai";
    }
    
    @Override
    public String getDetails() {
        return String.format("Dibayar: Rp %,.0f | Kembalian: Rp %,.0f", 
            amountPaid, change);
    }
    
    public double getChange() {
        return change;
    }
}

// Concrete Strategy - E-Wallet
public class EWalletPayment implements PaymentMethod {
    private String provider;
    private String phoneNumber;
    private double amount;
    
    @Override
    public String getMethodName() {
        return "E-Wallet (" + provider + ")";
    }
    // ... implementation
}

// Factory
public class PaymentMethodFactory {
    public static PaymentMethod createPayment(String type, Object... params) {
        switch (type.toLowerCase()) {
            case "tunai":
            case "cash":
                return new CashPayment((Double) params[0], (Double) params[1]);
            case "e-wallet":
                return new EWalletPayment((String) params[0], (String) params[1], (Double) params[2]);
            case "qris":
                return new QRISPayment((Double) params[0]);
            default:
                throw new IllegalArgumentException("Unknown payment type: " + type);
        }
    }
}
```

### 4.5 Implementasi Strategy Pattern - Discount

```java
// Interface
public interface DiscountStrategy {
    double calculate(double subtotal, int itemCount);
    String getDescription();
}

// Percentage Discount
public class PercentageDiscount implements DiscountStrategy {
    private double percentage;
    private String name;
    
    public PercentageDiscount(double percentage, String name) {
        this.percentage = percentage;
        this.name = name;
    }
    
    @Override
    public double calculate(double subtotal, int itemCount) {
        return subtotal * (percentage / 100);
    }
    
    @Override
    public String getDescription() {
        return name + " (" + (int)percentage + "%)";
    }
}

// Fixed Discount
public class FixedDiscount implements DiscountStrategy {
    private double amount;
    private String name;
    
    @Override
    public double calculate(double subtotal, int itemCount) {
        return Math.min(amount, subtotal);
    }
}

// Bulk Discount
public class BulkDiscount implements DiscountStrategy {
    private int minQuantity;
    private double percentage;
    
    @Override
    public double calculate(double subtotal, int itemCount) {
        if (itemCount >= minQuantity) {
            return subtotal * (percentage / 100);
        }
        return 0;
    }
}
```

### 4.6 Implementasi DAO Pattern

```java
// Interface
public interface ProductDAO {
    List<Product> findAll();
    Optional<Product> findByCode(String code);
    List<Product> findByCategory(String category);
    void insert(Product product);
    void update(Product product);
    void delete(String code);
    void updateStock(String code, int quantity);
}

// JDBC Implementation
public class JdbcProductDAO implements ProductDAO {
    private final Connection connection;
    
    public JdbcProductDAO() {
        this.connection = DatabaseConnection.getInstance().getConnection();
    }
    
    @Override
    public List<Product> findAll() {
        List<Product> products = new ArrayList<>();
        String sql = "SELECT * FROM products WHERE active = true ORDER BY name";
        
        try (PreparedStatement stmt = connection.prepareStatement(sql);
             ResultSet rs = stmt.executeQuery()) {
            while (rs.next()) {
                products.add(mapResultSetToProduct(rs));
            }
        } catch (SQLException e) {
            System.err.println("Error fetching products: " + e.getMessage());
        }
        return products;
    }
    
    @Override
    public void insert(Product product) {
        String sql = "INSERT INTO products (code, name, category, price, stock, unit, description) " +
                     "VALUES (?, ?, ?, ?, ?, ?, ?)";
        
        try (PreparedStatement stmt = connection.prepareStatement(sql)) {
            stmt.setString(1, product.getCode());
            stmt.setString(2, product.getName());
            stmt.setString(3, product.getCategory());
            stmt.setDouble(4, product.getPrice());
            stmt.setInt(5, product.getStock());
            stmt.setString(6, product.getUnit());
            stmt.setString(7, product.getDescription());
            stmt.executeUpdate();
        } catch (SQLException e) {
            throw new RuntimeException("Error inserting product: " + e.getMessage());
        }
    }
    
    // ... other implementations
}
```

### 4.7 Implementasi Login dengan Role Selection (NEW)

```java
public class LoginView {
    private TextField usernameField;
    private PasswordField passwordField;
    private ToggleGroup roleToggle;
    private ToggleButton adminButton, kasirButton;
    private String selectedRole = null;
    
    private VBox createRoleSelection() {
        Label roleLabel = new Label("Pilih Role:");
        
        adminButton = new ToggleButton("ğŸ‘” Admin");
        adminButton.setOnAction(e -> selectedRole = "ADMIN");
        
        kasirButton = new ToggleButton("ğŸª Kasir");
        kasirButton.setOnAction(e -> selectedRole = "KASIR");
        
        roleToggle = new ToggleGroup();
        adminButton.setToggleGroup(roleToggle);
        kasirButton.setToggleGroup(roleToggle);
        
        HBox roleBox = new HBox(10, adminButton, kasirButton);
        return new VBox(5, roleLabel, roleBox);
    }
    
    private void handleLogin() {
        // Validasi role harus dipilih
        if (selectedRole == null) {
            showError("Silakan pilih role terlebih dahulu!");
            return;
        }
        
        String username = usernameField.getText();
        String password = passwordField.getText();
        
        User user = loginController.authenticate(username, password, selectedRole);
        if (user != null) {
            openMainView(user);
        } else {
            showError("Login gagal! Username, password, atau role tidak sesuai.");
        }
    }
}
```

### 4.8 Implementasi Responsive Design

```java
public class LoginView {
    private void applyResponsiveStyles(Scene scene) {
        scene.widthProperty().addListener((obs, oldVal, newVal) -> {
            double width = newVal.doubleValue();
            
            if (width < 400) {
                // Mobile portrait
                applyMobileStyles();
            } else if (width < 600) {
                // Tablet
                applyTabletStyles();
            } else {
                // Desktop
                applyDesktopStyles();
            }
        });
    }
    
    private void applyMobileStyles() {
        loginCard.setPrefWidth(300);
        titleLabel.setStyle("-fx-font-size: 20px;");
        usernameField.setPrefWidth(250);
    }
    
    private void applyDesktopStyles() {
        loginCard.setPrefWidth(450);
        titleLabel.setStyle("-fx-font-size: 28px;");
        usernameField.setPrefWidth(350);
    }
}
```

---

## 5. Testing

### 5.1 Unit Testing dengan JUnit 5

```java
@DisplayName("Product Service Tests")
class ProductServiceTest {
    
    private ProductService productService;
    
    @Mock
    private ProductDAO productDAO;
    
    @BeforeEach
    void setUp() {
        MockitoAnnotations.openMocks(this);
        productService = new ProductService(productDAO);
    }
    
    @Test
    @DisplayName("Should return all products")
    void testGetAllProducts() {
        // Given
        List<Product> mockProducts = Arrays.asList(
            new Product("PRD001", "Beras", "Pangan", 15000, 100, "kg"),
            new Product("PRD002", "Pupuk", "Pertanian", 50000, 50, "kg")
        );
        when(productDAO.findAll()).thenReturn(mockProducts);
        
        // When
        List<Product> result = productService.getAllProducts();
        
        // Then
        assertEquals(2, result.size());
        verify(productDAO, times(1)).findAll();
    }
    
    @Test
    @DisplayName("Should calculate discount correctly")
    void testPercentageDiscount() {
        // Given
        DiscountStrategy discount = new PercentageDiscount(10, "Member");
        
        // When
        double result = discount.calculate(100000, 5);
        
        // Then
        assertEquals(10000, result, 0.01);
    }
    
    @Test
    @DisplayName("Should validate cash payment")
    void testCashPaymentValidation() {
        // Given
        PaymentMethod payment = new CashPayment(150000, 125000);
        
        // When & Then
        assertTrue(payment.validate());
        assertEquals(25000, ((CashPayment) payment).getChange(), 0.01);
    }
}
```

### 5.2 Test Coverage Summary

| Package | Class Coverage | Method Coverage | Line Coverage |
|---------|---------------|-----------------|---------------|
| model | 100% | 95% | 92% |
| service | 100% | 88% | 85% |
| strategy | 100% | 90% | 88% |
| dao | 80% | 75% | 70% |
| **Total** | **95%** | **87%** | **84%** |

---

## 6. Screenshot Aplikasi

### 6.1 Login Screen

**Fitur:**
- Input username dan password
- Pilihan role (Admin/Kasir) dengan toggle button
- Validasi role sebelum login
- Responsive design (mobile/desktop)

### 6.2 Dashboard Admin

**Fitur:**
- Total transaksi hari ini
- Revenue harian
- Produk terjual
- Low stock alert
- Grafik penjualan

### 6.3 Manajemen Produk (Admin)

**Fitur:**
- Tabel produk dengan pagination
- Form tambah/edit produk
- Search dan filter kategori
- CRUD operations

### 6.4 Manajemen Diskon (Admin) - NEW

**Fitur:**
- Tabel diskon dengan status aktif/nonaktif
- Form tambah diskon (Persentase, Nominal, Bulk, Voucher)
- Edit dan hapus diskon
- Toggle aktif/nonaktif
- Search diskon
- Real-time sync ke Kasir

### 6.5 Transaksi (Kasir)

**Fitur:**
- Pencarian produk
- Keranjang belanja
- Apply diskon dari dropdown (dikelola Admin)
- Input voucher code
- Multi payment method
- Preview struk

### 6.6 Laporan Penjualan (Admin)

**Fitur:**
- Laporan harian
- Laporan periode
- Export report

### 6.7 Riwayat Transaksi (Kasir)

**Fitur:**
- Daftar transaksi
- Filter tanggal
- Detail transaksi
- Cetak ulang struk

---

## 7. Kesimpulan

### 7.1 Pencapaian

âœ… **Konsep OOP Terintegrasi:**
- Encapsulation: Private attributes dengan getter/setter
- Inheritance: Interface implementation
- Polymorphism: Strategy pattern untuk payment dan discount
- Abstraction: DAO pattern untuk database access

âœ… **Design Patterns Diterapkan:**
- Singleton (DatabaseConnection, DiscountConfigService)
- Strategy (PaymentMethod, DiscountStrategy)
- Factory (PaymentMethodFactory)
- DAO (ProductDAO, UserDAO, TransactionDAO)
- Observer (ObservableList untuk real-time sync)
- MVC (View, Controller, Model separation)

âœ… **Fitur Lengkap:**
- Login dengan role selection (Admin/Kasir)
- Manajemen produk CRUD
- **Manajemen diskon oleh Admin dengan sync ke Kasir (NEW)**
- Transaksi dengan multi payment
- Laporan penjualan
- Responsive design

### 7.2 Fitur Baru yang Diimplementasikan

| Fitur | Deskripsi | Pattern Used |
|-------|-----------|--------------|
| Role Selection Login | Pilih role Admin/Kasir sebelum login | - |
| Responsive UI | UI menyesuaikan ukuran layar | - |
| Discount Management | Admin kelola diskon, sync ke Kasir | Singleton, Observer |
| Multi Discount Type | Persentase, Nominal, Bulk, Voucher | Strategy |

### 7.3 Future Improvements

1. ~~Advanced discount rules~~ âœ… DONE
2. Password hashing dengan BCrypt
3. Connection pooling dengan HikariCP
4. Export laporan ke PDF/Excel
5. Persist discount config ke database
6. Discount scheduling (periode waktu)
7. Customer loyalty program

---

## 8. Lampiran

### 8.1 Cara Menjalankan Aplikasi

```bash
# 1. Setup database (pertama kali)
psql -h localhost -U postgres -d agripos -f sql/schema.sql
psql -h localhost -U postgres -d agripos -f sql/seed.sql

# 2. Build project
cd praktikum/week15-proyek-kelompok
mvn clean compile

# 3. Run aplikasi
mvn javafx:run
```

### 8.2 Default Login Credentials

| Role | Username | Password |
|------|----------|----------|
| Admin | admin | admin123 |
| Kasir | kasir | kasir123 |

### 8.3 Default Discount Codes

| Kode | Nama | Tipe | Nilai |
|------|------|------|-------|
| UMUM5 | Diskon Umum | Persentase | 5% |
| MEMBER10 | Diskon Member | Persentase | 10% |
| BULK15 | Diskon Bulk | Persentase | 15% (min 5 item) |
| WELCOME | Welcome Discount | Persentase | 5% |
| PROMO50K | Promo 50K | Nominal | Rp 50.000 |

### 8.4 Referensi

1. Oracle Java Documentation
2. JavaFX Documentation
3. PostgreSQL Documentation
4. Design Patterns: Elements of Reusable Object-Oriented Software (GoF)
5. Clean Code: A Handbook of Agile Software Craftsmanship

---

**Dokumen ini dibuat sebagai laporan praktikum Week 15: Proyek Kelompok**

*Terima kasih kepada dosen pembimbing dan seluruh anggota tim atas kerjasamanya.*
